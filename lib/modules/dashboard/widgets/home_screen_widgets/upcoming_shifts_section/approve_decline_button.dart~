import 'package:flutter/material.dart';
import 'package:flutter_bloc/flutter_bloc.dart';
import 'package:orion_safeguard/modules/dashboard/cubits/home_cubits/home_cubit.dart';
import 'package:orion_safeguard/modules/shift_details/cubits/shift_detail_cubits/shift_details_cubit.dart';

import '../../../../../config/constants/app_colors.dart';
import '../../../../../ui/button/primary_button.dart';
import '../../../../../utils/heights_and_widths.dart';
import '../../../../alerts_announcements/widgets/decline_reason_dialogue.dart';
import '../../../model/shifts_model/shifts_model.dart';

class ApproveDeclineButton extends StatelessWidget {
  const ApproveDeclineButton({
    super.key,
    required this.shiftModel,
  });

  final ShiftModel? shiftModel;

  @override
  Widget build(BuildContext context) {
    return Column(
      children: [
        PrimaryButton(
          height: 50,
          hMargin: 0,
          backgroundColor: AppColors.primaryColor,
          borderRadius: 16.0,
          onPressed: () {
            context.read<ShiftDetailCubit>().approve(shiftModel);
          },
          title: "Approve",
        ),
        h0P5,
        PrimaryOutlineButton(
          height: 50,
          borderRadius: 16.0,
          titleColor: AppColors.primaryColor,
          borderColor: AppColors.primaryColor,
          onPressed: () {
            showDialog(
                    context: context,
                    builder: (context) => const DeclineReasonDialogue())
                .then((value) async {
              if (value["status"] == "submitted") {
                 context.read<ShiftDetailCubit>().decline(shiftModel);
              }
            });
          },
          title: "Decline",
        )
      ],
    );
  }
}
